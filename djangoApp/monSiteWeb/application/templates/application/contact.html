{% extends "application/base.html" %}
{% load static %}

{% block title %}Contact{% endblock %}

{% block content %}
<br><br><br><br><br><br>
<div class="indice">
  <center><h1>CONTACT</h1></center>
</div><br>
<section id="section2">
  <section id="contact">
    <h2>Contactez-nous</h2>
    <div class="contact-container">
      <div class="contact-info">
        <p><strong>OUEDRAOOGO ALBERT</strong></p>
        <p>Etudie à l'Université Thomas Sankara</p>
        <p>Ouagadougou, Burkina Faso</p>
        <p>Email : <a href="mailto:ouedraogograceolivier5@gmail.com">ouedraogograceolivier5@gmail.com</a></p>
        <p>Téléphone : +226 77 08 54 84 / +226 79 96 87 37</p>
      </div>

      <form id="contactForm" class="contact-form" action="https://formspree.io/f/meekgzpl" method="POST">
        <label for="name">Nom</label>
        <input type="text" name="name" id="name" required>

        <label for="email">Email</label>
        <input type="email" name="email" id="email" required>

        <label for="subject">Sujet</label>
        <input type="text" name="subject" id="subject">

        <label for="message">Message</label>
        <textarea name="message" id="message" required></textarea>

        <button type="submit">Envoyer</button>
      </form>
    </div>
  </section>
</section>

<script>
document.getElementById("contactForm").addEventListener("submit", async function(e) {
  e.preventDefault(); // empêche la redirection par défaut Formspree
  const form = e.target;
  const data = new FormData(form);

  const response = await fetch(form.action, {
    method: form.method,
    body: data,
    headers: { 'Accept': 'application/json' }
  });

  if (response.ok) {
    // Redirection vers ta page Django
    window.location.href = "/success/";
  } else {
    alert("Erreur lors de l'envoi du message.");
  }
});
</script>
{% endblock %}
